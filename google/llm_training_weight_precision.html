<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMè®­ç»ƒä¸­æƒé‡çš„å®é™…æ•°å€¼èŒƒå›´ä¸ç²¾åº¦é€‰æ‹© - æŠ€æœ¯æŒ‡å—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            color: #333;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 10px;
        }
        
        .update-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.95em;
        }
        
        main {
            padding: 40px;
        }
        
        .toc {
            background: #f5f5f5;
            border-left: 4px solid #2a5298;
            padding: 20px;
            margin-bottom: 40px;
            border-radius: 8px;
        }
        
        .toc h3 {
            margin-bottom: 15px;
            color: #1e3c72;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            margin-bottom: 8px;
        }
        
        .toc a {
            color: #2a5298;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .toc a:hover {
            color: #1e3c72;
            text-decoration: underline;
        }
        
        section {
            margin-bottom: 40px;
        }
        
        h2 {
            color: #1e3c72;
            border-bottom: 2px solid #2a5298;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        h3 {
            color: #2a5298;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        h4 {
            color: #333;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        .highlight-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .highlight-box.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .highlight-box.important {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
        
        .highlight-box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        thead {
            background: #1e3c72;
            color: white;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.95em;
        }
        
        tbody tr:hover {
            background: #f5f5f5;
        }
        
        tbody tr:nth-child(even) {
            background: #fafafa;
        }
        
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .code-block code {
            color: #333;
        }
        
        .formula {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            text-align: center;
            overflow-x: auto;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-box {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background: #fafafa;
        }
        
        .comparison-box h4 {
            color: #1e3c72;
            margin-top: 0;
        }
        
        .comparison-box ul {
            margin: 0;
        }
        
        .metric-table {
            font-size: 0.95em;
        }
        
        .metric-table td:first-child {
            font-weight: 600;
            color: #1e3c72;
            width: 40%;
        }
        
        .footer {
            background: #f5f5f5;
            padding: 30px 40px;
            border-top: 2px solid #ddd;
            text-align: center;
            color: #666;
        }
        
        .chart-container {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .note {
            background: #fffbea;
            border-left: 4px solid #ffa500;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 0.95em;
            color: #666;
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            .comparison-container {
                grid-template-columns: 1fr;
            }
            
            main {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§  LLMè®­ç»ƒä¸­çš„æƒé‡ä¸ç²¾åº¦</h1>
            <p>æ·±åº¦å­¦ä¹ å¤§æ¨¡å‹æƒé‡æ•°å€¼èŒƒå›´ä¸è®­ç»ƒç²¾åº¦é€‰æ‹©æŒ‡å—</p>
            <div class="update-info">
                <strong>æœ€åæ›´æ–°ï¼š</strong> 2025å¹´11æœˆ | 
                <strong>æŠ€æœ¯æ·±åº¦ï¼š</strong> ä¸­çº§/é«˜çº§
            </div>
        </header>
        
        <main>
            <div class="toc">
                <h3>ğŸ“‘ ç›®å½•</h3>
                <ul>
                    <li><a href="#section1">1. LLMæƒé‡åŸºç¡€æ¦‚å¿µ</a></li>
                    <li><a href="#section2">2. æƒé‡æ•°å€¼èŒƒå›´åˆ†æ</a></li>
                    <li><a href="#section3">3. æ•°æ®ç±»å‹ä¸ç²¾åº¦é€‰æ‹©</a></li>
                    <li><a href="#section4">4. ä¸åŒç²¾åº¦çš„æ€§èƒ½å¯¹æ¯”</a></li>
                    <li><a href="#section5">5. å®è·µå»ºè®®ä¸æœ€ä½³å®è·µ</a></li>
                    <li><a href="#section6">6. å¸¸è§é—®é¢˜è§£ç­”</a></li>
                </ul>
            </div>
            
            <section id="section1">
                <h2>1. LLMæƒé‡åŸºç¡€æ¦‚å¿µ</h2>
                
                <h3>1.1 ä»€ä¹ˆæ˜¯æƒé‡ï¼Ÿ</h3>
                <p>
                    åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œæƒé‡(Weight)æ˜¯è¿æ¥ä¸¤ä¸ªç¥ç»å…ƒä¹‹é—´çš„å‚æ•°ã€‚å¯¹äºLLM(å¤§è¯­è¨€æ¨¡å‹)æ¥è¯´ï¼Œæƒé‡è¡¨ç¤ºï¼š
                </p>
                <ul>
                    <li><strong>å‚æ•°çŸ©é˜µä¸­çš„æ•°å€¼</strong>ï¼šæ¯ä¸ªæƒé‡æ˜¯ä¸€ä¸ªæ ‡é‡å€¼ï¼Œå½±å“æ•°æ®æµç»ç½‘ç»œæ—¶çš„è½¬æ¢æ–¹å¼</li>
                    <li><strong>å­¦ä¹ çš„è¡¨ç¤º</strong>ï¼šæƒé‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­è°ƒæ•´ï¼Œä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°</li>
                    <li><strong>æ¨¡å‹å®¹é‡çš„ä½“ç°</strong>ï¼šæƒé‡æ•°é‡å†³å®šäº†æ¨¡å‹çš„å‚æ•°è§„æ¨¡</li>
                </ul>
                
                <h3>1.2 LLMä¸­çš„æƒé‡åˆ†ç±»</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æƒé‡ç±»å‹</th>
                            <th>ä½ç½®</th>
                            <th>åŠŸèƒ½</th>
                            <th>æ•°é‡è§„æ¨¡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Embeddingæƒé‡</td>
                            <td>è¾“å…¥å±‚</td>
                            <td>å°†tokenæ˜ å°„åˆ°å‘é‡ç©ºé—´</td>
                            <td>Vocab Size Ã— Hidden Dim</td>
                        </tr>
                        <tr>
                            <td>æ³¨æ„åŠ›æƒé‡</td>
                            <td>Transformerå—</td>
                            <td>Queryã€Keyã€ValueæŠ•å½±</td>
                            <td>Layer Ã— (3Ã—HiddenÂ²)</td>
                        </tr>
                        <tr>
                            <td>å‰é¦ˆç½‘ç»œæƒé‡</td>
                            <td>Transformerå—</td>
                            <td>éçº¿æ€§å˜æ¢</td>
                            <td>Layer Ã— (4Ã—HiddenÂ²)</td>
                        </tr>
                        <tr>
                            <td>LayerNormå‚æ•°</td>
                            <td>æ¯ä¸€å±‚</td>
                            <td>å½’ä¸€åŒ–å’Œå¹³ç§»</td>
                            <td>Layer Ã— (2Ã—Hidden)</td>
                        </tr>
                        <tr>
                            <td>è¾“å‡ºæŠ•å½±æƒé‡</td>
                            <td>è¾“å‡ºå±‚</td>
                            <td>æ˜ å°„å›è¯æ±‡è¡¨å¤§å°</td>
                            <td>Hidden Ã— Vocab Size</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <section id="section2">
                <h2>2. æƒé‡æ•°å€¼èŒƒå›´åˆ†æ</h2>
                
                <h3>2.1 åˆå§‹åŒ–é˜¶æ®µçš„æƒé‡èŒƒå›´</h3>
                <p>åœ¨è®­ç»ƒå¼€å§‹å‰ï¼Œæƒé‡éœ€è¦é€šè¿‡åˆé€‚çš„åˆå§‹åŒ–æ–¹æ³•è®¾ç½®ï¼š</p>
                
                <h4>Kaiming (He) åˆå§‹åŒ–</h4>
                <div class="formula">
                    w ~ N(0, âˆš(2/n_in))<br>
                    å…¶ä¸­ n_in æ˜¯è¾“å…¥ç»´åº¦
                </div>
                <p><strong>èŒƒå›´ï¼š</strong> å¤§çº¦ [-0.05, 0.05] ï¼ˆå¯¹äºHidden Dim=768ï¼‰</p>
                
                <h4>Xavier (Glorot) åˆå§‹åŒ–</h4>
                <div class="formula">
                    w ~ U(-âˆš(6/(n_in + n_out)), âˆš(6/(n_in + n_out)))<br>
                    å…¶ä¸­ U è¡¨ç¤ºå‡åŒ€åˆ†å¸ƒ
                </div>
                <p><strong>èŒƒå›´ï¼š</strong> å¤§çº¦ [-0.07, 0.07] ï¼ˆå¯¹äºHidden Dim=768ï¼‰</p>
                
                <h3>2.2 è®­ç»ƒè¿‡ç¨‹ä¸­çš„æƒé‡èŒƒå›´</h3>
                <table>
                    <thead>
                        <tr>
                            <th>è®­ç»ƒé˜¶æ®µ</th>
                            <th>å…¸å‹èŒƒå›´</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>åˆå§‹åŒ–</td>
                            <td>[-0.1, 0.1]</td>
                            <td>å°çš„éšæœºå€¼</td>
                        </tr>
                        <tr>
                            <td>çƒ­èº«æœŸï¼ˆWarmupï¼‰</td>
                            <td>[-0.2, 0.2]</td>
                            <td>å­¦ä¹ ç‡ä»0é€æ­¥å¢åŠ </td>
                        </tr>
                        <tr>
                            <td>ä¸»è®­ç»ƒæœŸ</td>
                            <td>[-1.0, 1.0]</td>
                            <td>æƒé‡å¿«é€Ÿå˜åŒ–ï¼Œæ¨¡å‹å­¦ä¹ </td>
                        </tr>
                        <tr>
                            <td>åæœŸæ”¶æ•›</td>
                            <td>[-5.0, 5.0]</td>
                            <td>æƒé‡é€æ¸ç¨³å®šï¼Œéƒ¨åˆ†å±‚æƒé‡å¯èƒ½è¾ƒå¤§</td>
                        </tr>
                        <tr>
                            <td>æœ€ç»ˆæ”¶æ•›</td>
                            <td>[-3.0, 3.0]</td>
                            <td>å¤§å¤šæ•°æƒé‡åœ¨æ­¤èŒƒå›´å†…</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="highlight-box">
                    <strong>å…³é”®è§‚å¯Ÿï¼š</strong> å³ä½¿åœ¨å®Œå…¨æ”¶æ•›åï¼ŒLLMçš„æƒé‡é€šå¸¸ä¹Ÿä¸ä¼šè¶…è¿‡ Â±10 çš„èŒƒå›´ã€‚å¤§å¤šæ•°æƒé‡é›†ä¸­åœ¨ [-3, 3] ä¹‹é—´ï¼Œè¿™æ˜¯å› ä¸ºï¼š
                    <ul style="margin-top: 10px;">
                        <li>LayerNormçš„å½’ä¸€åŒ–ä½œç”¨é™åˆ¶äº†æƒé‡çš„ç»å¯¹å€¼</li>
                        <li>Residual Connection(æ®‹å·®è¿æ¥)ä½¿å¾—æ¢¯åº¦æµæ›´ç¨³å®š</li>
                        <li>å­¦ä¹ ç‡è¡°å‡é˜²æ­¢æƒé‡è¿‡åº¦å¢é•¿</li>
                    </ul>
                </div>
                
                <h3>2.3 ä¸åŒæ¨¡å‹è§„æ¨¡çš„æƒé‡èŒƒå›´</h3>
                <table class="metric-table">
                    <tr>
                        <td>GPT-2 (1.5Bå‚æ•°)</td>
                        <td>å¤§éƒ¨åˆ†æƒé‡åœ¨ [-2.5, 2.5] èŒƒå›´å†…</td>
                    </tr>
                    <tr>
                        <td>GPT-3 (175Bå‚æ•°)</td>
                        <td>å¤§éƒ¨åˆ†æƒé‡åœ¨ [-3.0, 3.0] èŒƒå›´å†…</td>
                    </tr>
                    <tr>
                        <td>LLaMA (7B-70B)</td>
                        <td>å¤§éƒ¨åˆ†æƒé‡åœ¨ [-2.0, 2.0] èŒƒå›´å†…</td>
                    </tr>
                    <tr>
                        <td>Claude, GPT-4ç­‰</td>
                        <td>å¤§éƒ¨åˆ†æƒé‡åœ¨ [-3.0, 3.0] èŒƒå›´å†…ï¼ˆæ¨æ–­ï¼‰</td>
                    </tr>
                </table>
                
                <h3>2.4 æ¢¯åº¦çš„èŒƒå›´</h3>
                <p>åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦çš„èŒƒå›´åŒæ ·é‡è¦ï¼š</p>
                <table>
                    <thead>
                        <tr>
                            <th>åœºæ™¯</th>
                            <th>æ¢¯åº¦èŒƒå›´</th>
                            <th>æ½œåœ¨é—®é¢˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æ­£å¸¸è®­ç»ƒ</td>
                            <td>[-0.01, 0.01]</td>
                            <td>æ— </td>
                        </tr>
                        <tr>
                            <td>æ¢¯åº¦çˆ†ç‚¸</td>
                            <td>> 10</td>
                            <td>æƒé‡æ›´æ–°è¿‡å¤§ï¼Œæ¨¡å‹å‘æ•£</td>
                        </tr>
                        <tr>
                            <td>æ¢¯åº¦æ¶ˆå¤±</td>
                            <td>< 0.0001</td>
                            <td>æƒé‡æ›´æ–°è¿‡å°ï¼Œæ·±å±‚ç½‘ç»œæ— æ³•å­¦ä¹ </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <section id="section3">
                <h2>3. æ•°æ®ç±»å‹ä¸ç²¾åº¦é€‰æ‹©</h2>
                
                <h3>3.1 å¸¸ç”¨çš„æµ®ç‚¹æ•°ç²¾åº¦</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ•°æ®ç±»å‹</th>
                            <th>ä½æ•°</th>
                            <th>èŒƒå›´</th>
                            <th>ç²¾åº¦</th>
                            <th>ç”¨é€”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>FP32</strong> (Float32)</td>
                            <td>32ä½</td>
                            <td>Â±1.4Ã—10â»â´âµ ~ Â±3.4Ã—10Â³â¸</td>
                            <td>~7ä½åè¿›åˆ¶</td>
                            <td>æ ‡å‡†ç²¾åº¦è®­ç»ƒï¼Œå‚è€ƒå®ç°</td>
                        </tr>
                        <tr>
                            <td><strong>FP16</strong> (Float16)</td>
                            <td>16ä½</td>
                            <td>Â±5.9Ã—10â»â¸ ~ Â±6.5Ã—10â´</td>
                            <td>~3-4ä½åè¿›åˆ¶</td>
                            <td>æ··åˆç²¾åº¦è®­ç»ƒï¼Œæ¨ç†åŠ é€Ÿ</td>
                        </tr>
                        <tr>
                            <td><strong>BF16</strong> (Bfloat16)</td>
                            <td>16ä½</td>
                            <td>Â±1.0Ã—10â»Â³â¸ ~ Â±3.4Ã—10Â³â¸</td>
                            <td>~2ä½åè¿›åˆ¶</td>
                            <td>æ··åˆç²¾åº¦è®­ç»ƒï¼Œæ›´å¥½çš„åŠ¨æ€èŒƒå›´</td>
                        </tr>
                        <tr>
                            <td><strong>FP8</strong></td>
                            <td>8ä½</td>
                            <td>æ ¹æ®é˜»å°¼ç­–ç•¥è€Œå®š</td>
                            <td>~1ä½åè¿›åˆ¶</td>
                            <td>å®éªŒæ€§ï¼Œç§»åŠ¨è®¾å¤‡æ¨ç†</td>
                        </tr>
                        <tr>
                            <td><strong>INT8</strong></td>
                            <td>8ä½</td>
                            <td>-128 ~ 127</td>
                            <td>æ•´æ•°ç²¾åº¦</td>
                            <td>é‡åŒ–æ¨ç†ï¼Œæ¨¡å‹å‹ç¼©</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>3.2 æ··åˆç²¾åº¦è®­ç»ƒ (Mixed Precision Training)</h3>
                <p>æ··åˆç²¾åº¦è®­ç»ƒæ˜¯ç°ä»£LLMè®­ç»ƒçš„æ ‡å‡†åšæ³•ï¼Œç»“åˆäº†ä¸åŒç²¾åº¦çš„ä¼˜ç‚¹ï¼š</p>
                
                <div class="comparison-container">
                    <div class="comparison-box">
                        <h4>ğŸ“Š FP32</h4>
                        <ul>
                            <li>âœ… é«˜ç²¾åº¦</li>
                            <li>âœ… æ•°å€¼ç¨³å®š</li>
                            <li>âœ… åŠ¨æ€èŒƒå›´å¤§</li>
                            <li>âŒ å†…å­˜å ç”¨å¤š</li>
                            <li>âŒ è®¡ç®—é€Ÿåº¦æ…¢</li>
                        </ul>
                    </div>
                    <div class="comparison-box">
                        <h4>âš¡ FP16/BF16</h4>
                        <ul>
                            <li>âœ… å†…å­˜èŠ‚çœ50%</li>
                            <li>âœ… è®¡ç®—é€Ÿåº¦å¿«2-8å€</li>
                            <li>âœ… GPUç¡¬ä»¶æ”¯æŒå¥½</li>
                            <li>âŒ ç²¾åº¦æŸå¤±</li>
                            <li>âŒ éœ€è¦ç‰¹æ®Šå¤„ç†</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight-box success">
                    <strong>âœ“ æ··åˆç²¾åº¦æœ€ä½³å®è·µï¼š</strong>
                    <ul style="margin-top: 10px;">
                        <li>æƒé‡ã€æ¿€æ´»å€¼ã€æ¢¯åº¦è®¡ç®—ï¼šFP16 æˆ– BF16</li>
                        <li>æƒé‡æ›´æ–°ã€æŸå¤±ç¼©æ”¾ï¼šFP32</li>
                        <li>ä½¿ç”¨æ¢¯åº¦ç¼©æ”¾(Gradient Scaling)é˜²æ­¢æ¢¯åº¦ä¸‹æº¢</li>
                    </ul>
                </div>
                
                <h3>3.3 é‡åŒ–ç²¾åº¦ç­‰çº§</h3>
                <table>
                    <thead>
                        <tr>
                            <th>é‡åŒ–æ–¹å¼</th>
                            <th>ç²¾åº¦</th>
                            <th>æ¨¡å‹å¤§å°</th>
                            <th>å‡†ç¡®åº¦æŸå¤±</th>
                            <th>é€‚ç”¨åœºæ™¯</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æ— é‡åŒ–</td>
                            <td>FP32</td>
                            <td>100%</td>
                            <td>0%</td>
                            <td>é«˜ç²¾åº¦åº”ç”¨</td>
                        </tr>
                        <tr>
                            <td>INT8 é‡åŒ–</td>
                            <td>8ä½</td>
                            <td>25%</td>
                            <td>0.5-1%</td>
                            <td>CPU æ¨ç†</td>
                        </tr>
                        <tr>
                            <td>INT4 é‡åŒ–</td>
                            <td>4ä½</td>
                            <td>12.5%</td>
                            <td>1-2%</td>
                            <td>ç§»åŠ¨è®¾å¤‡</td>
                        </tr>
                        <tr>
                            <td>INT3 / INT2</td>
                            <td>2-3ä½</td>
                            <td>6-9%</td>
                            <td>2-5%</td>
                            <td>è¶…ä½åŠŸè€—è®¾å¤‡</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <section id="section4">
                <h2>4. ä¸åŒç²¾åº¦çš„æ€§èƒ½å¯¹æ¯”</h2>
                
                <h3>4.1 ç²¾åº¦ä¸æ€§èƒ½æ›²çº¿</h3>
                <div class="chart-container">
                    <p><strong>è®­ç»ƒé€Ÿåº¦ vs ç²¾åº¦</strong></p>
                    <pre>
ç²¾åº¦
â”ƒ
FP32 â”‚     â—†
     â”‚    â•± â•²
FP16 â”‚   â—†   â•²
     â”‚  â•±     â•²
INT8 â”‚ â—†       â—†
     â”‚â•±         â•²
INT4 â”‚           â—†
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è®­ç»ƒé€Ÿåº¦ â†’
        1x  2x  4x  8x
                    </pre>
                </div>
                
                <h3>4.2 å…·ä½“æ€§èƒ½æ•°æ®ï¼ˆåŸºå‡†æµ‹è¯•ï¼‰</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æŒ‡æ ‡</th>
                            <th>FP32</th>
                            <th>FP16 (æ··åˆ)</th>
                            <th>BF16 (æ··åˆ)</th>
                            <th>INT8</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ååé‡</strong></td>
                            <td>1x (åŸºå‡†)</td>
                            <td>3-5x</td>
                            <td>3-5x</td>
                            <td>2-4x</td>
                        </tr>
                        <tr>
                            <td><strong>å†…å­˜ä½¿ç”¨</strong></td>
                            <td>100%</td>
                            <td>50-60%</td>
                            <td>50-60%</td>
                            <td>25-30%</td>
                        </tr>
                        <tr>
                            <td><strong>æ”¶æ•›é€Ÿåº¦</strong></td>
                            <td>åŸºå‡†</td>
                            <td>åŸºæœ¬ç›¸åŒ</td>
                            <td>åŸºæœ¬ç›¸åŒ</td>
                            <td>ç¨æ…¢ (+5-10%)</td>
                        </tr>
                        <tr>
                            <td><strong>æœ€ç»ˆç²¾åº¦</strong></td>
                            <td>100%</td>
                            <td>99.5-99.8%</td>
                            <td>99.5-99.8%</td>
                            <td>97-99%</td>
                        </tr>
                        <tr>
                            <td><strong>ç¨³å®šæ€§</strong></td>
                            <td>å¾ˆå¥½</td>
                            <td>éœ€è¦loss scale</td>
                            <td>è¾ƒå¥½</td>
                            <td>ä¸€èˆ¬</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>4.3 æ¨ç†æ€§èƒ½å¯¹æ¯”</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç²¾åº¦æ ¼å¼</th>
                            <th>å»¶è¿Ÿ (ms)</th>
                            <th>ååé‡</th>
                            <th>åŠŸè€—</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>FP32</td>
                            <td>100</td>
                            <td>1x</td>
                            <td>100W</td>
                        </tr>
                        <tr>
                            <td>FP16</td>
                            <td>25-30</td>
                            <td>3.5x</td>
                            <td>40W</td>
                        </tr>
                        <tr>
                            <td>BF16</td>
                            <td>25-30</td>
                            <td>3.5x</td>
                            <td>40W</td>
                        </tr>
                        <tr>
                            <td>INT8</td>
                            <td>15-20</td>
                            <td>5-6x</td>
                            <td>20W</td>
                        </tr>
                        <tr>
                            <td>INT4</td>
                            <td>10-15</td>
                            <td>8-10x</td>
                            <td>10W</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <section id="section5">
                <h2>5. å®è·µå»ºè®®ä¸æœ€ä½³å®è·µ</h2>
                
                <h3>5.1 é€‰æ‹©ç²¾åº¦çš„å†³ç­–æ ‘</h3>
                <div class="highlight-box">
                    <strong>Q: ä½ åœ¨åšä»€ä¹ˆï¼Ÿ</strong><br>
                    <br>
                    â”œâ”€ ä»é›¶å¼€å§‹è®­ç»ƒ LLM<br>
                    â”‚  â””â”€â†’ ä½¿ç”¨ <strong>æ··åˆç²¾åº¦ (FP32 master weight + FP16 forward/backward)</strong><br>
                    â”‚<br>
                    â”œâ”€ å¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹<br>
                    â”‚  â””â”€â†’ ä½¿ç”¨ <strong>æ··åˆç²¾åº¦æˆ– BF16</strong><br>
                    â”‚<br>
                    â”œâ”€ æ¨ç†æœåŠ¡<br>
                    â”‚  â”œâ”€ é«˜ç²¾åº¦éœ€æ±‚ â†’ <strong>FP16</strong><br>
                    â”‚  â”œâ”€ æˆæœ¬/åŠŸè€—æ•æ„Ÿ â†’ <strong>INT8</strong><br>
                    â”‚  â””â”€ æé™å‹ç¼© â†’ <strong>INT4</strong><br>
                    â”‚<br>
                    â””â”€ ç§»åŠ¨/è¾¹ç¼˜è®¾å¤‡<br>
                       â””â”€â†’ <strong>INT4 æˆ– INT3 é‡åŒ–</strong>
                </div>
                
                <h3>5.2 æƒé‡åˆå§‹åŒ–æœ€ä½³å®è·µ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>åˆå§‹åŒ–æ–¹æ³•</th>
                            <th>é€‚ç”¨åœºæ™¯</th>
                            <th>å…¬å¼</th>
                            <th>ä¼˜ç‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Kaiming (He)</td>
                            <td>ReLU æ¿€æ´»</td>
                            <td>âˆš(2/n_in)</td>
                            <td>é¿å…æ¿€æ´»å€¼é¥±å’Œ</td>
                        </tr>
                        <tr>
                            <td>Xavier/Glorot</td>
                            <td>Sigmoid/Tanh</td>
                            <td>âˆš(6/(n_in + n_out))</td>
                            <td>å¹³è¡¡è¾“å…¥è¾“å‡º</td>
                        </tr>
                        <tr>
                            <td>æ­£äº¤åˆå§‹åŒ–</td>
                            <td>RNN/LSTM</td>
                            <td>æ­£äº¤çŸ©é˜µ</td>
                            <td>æ¢¯åº¦æµç¨³å®š</td>
                        </tr>
                        <tr>
                            <td>å°æƒé‡éšæœº</td>
                            <td>Transformer</td>
                            <td>N(0, 0.02)</td>
                            <td>ç®€å•æœ‰æ•ˆ</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>5.3 æ··åˆç²¾åº¦è®­ç»ƒä»£ç ç¤ºä¾‹</h3>
                <div class="code-block">
# PyTorch ç¤ºä¾‹
from torch.cuda.amp import autocast, GradScaler

model = MyLLM()
optimizer = torch.optim.Adam(model.parameters())
scaler = GradScaler()

for batch in dataloader:
    # Forward pass with FP16
    with autocast():
        outputs = model(batch)
        loss = criterion(outputs, targets)
    
    # Backward pass
    scaler.scale(loss).backward()
    
    # Gradient clipping
    scaler.unscale_(optimizer)
    torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)
    
    # Optimizer step
    scaler.step(optimizer)
    scaler.update()
                </div>
                
                <h3>5.4 æ¢¯åº¦è£å‰ª (Gradient Clipping)</h3>
                <p>é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸çš„å…³é”®æŠ€æœ¯ï¼š</p>
                <div class="highlight-box warning">
                    <strong>âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦æ¢¯åº¦è£å‰ªï¼Ÿ</strong>
                    <ul style="margin-top: 10px;">
                        <li>æ·±å±‚ç½‘ç»œä¸­æ¢¯åº¦å¯èƒ½æŒ‡æ•°å¢é•¿</li>
                        <li>åœ¨æŸäº›æ•°æ®ç‚¹ï¼ŒæŸå¤±å‡½æ•°å¯èƒ½æœ‰é™¡å³­çš„åœ°æ–¹</li>
                        <li>æ··åˆç²¾åº¦è®­ç»ƒä¸­ï¼ŒFP16ç²¾åº¦é™åˆ¶å¯¼è‡´æ•°å€¼ä¸ç¨³å®š</li>
                    </ul>
                </div>
                
                <div class="code-block">
# ä¸¤ç§ä¸»è¦æ¢¯åº¦è£å‰ªæ–¹æ³•

# 1. æŒ‰èŒƒæ•°è£å‰ª (æ¨è)
torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)

# 2. æŒ‰å€¼è£å‰ª
torch.nn.utils.clip_grad_value_(model.parameters(), clip_value=0.5)
                </div>
                
                <h3>5.5 æƒé‡è¡°å‡ (Weight Decay)</h3>
                <p>L2 æ­£åˆ™åŒ–å¯¹LLMè®­ç»ƒçš„é‡è¦æ€§ï¼š</p>
                <table>
                    <thead>
                        <tr>
                            <th>æƒé‡è¡°å‡ç³»æ•°</th>
                            <th>æƒé‡èŒƒå›´</th>
                            <th>æ¨¡å‹æ³›åŒ–æ€§</th>
                            <th>å»ºè®®</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0 (æ— è¡°å‡)</td>
                            <td>[-5, 5]</td>
                            <td>å·®</td>
                            <td>ä¸æ¨è</td>
                        </tr>
                        <tr>
                            <td>0.01</td>
                            <td>[-2, 2]</td>
                            <td>å¥½</td>
                            <td>æ ‡å‡†é€‰æ‹©</td>
                        </tr>
                        <tr>
                            <td>0.1</td>
                            <td>[-1, 1]</td>
                            <td>å¾ˆå¥½</td>
                            <td>ä¿å®ˆç­–ç•¥</td>
                        </tr>
                        <tr>
                            <td>0.001</td>
                            <td>[-3, 3]</td>
                            <td>ä¸€èˆ¬</td>
                            <td>å®½æ¾ç­–ç•¥</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>5.6 å­¦ä¹ ç‡è°ƒåº¦å»ºè®®</h3>
                <div class="code-block">
# æ ‡å‡†çš„ LLM è®­ç»ƒå­¦ä¹ ç‡è°ƒåº¦
# 1. Warmup é˜¶æ®µï¼šçº¿æ€§å¢åŠ å­¦ä¹ ç‡ (0 â†’ peak_lr)
# 2. è¡°å‡é˜¶æ®µï¼šä½™å¼¦è¡°å‡åˆ°æ¥è¿‘ 0
# 3. æ€»æ­¥æ•°ï¼š20-30% ç”¨äº warmupï¼Œ70-80% ç”¨äºè¡°å‡

ä» 0 å¼€å§‹
â†“
çº¿æ€§å‡è‡³ peak_lr (å‰ 5% æ­¥æ•°)
â†“
ä½™å¼¦è¡°å‡åˆ° 0 (å 95% æ­¥æ•°)

æ¨èçš„ peak_lrï¼š
- å¤§å‹ LLM: 1e-4 ~ 5e-5
- ä¸­å‹æ¨¡å‹: 5e-4 ~ 1e-4
- å°å‹æ¨¡å‹: 1e-3 ~ 5e-4
                </div>
            </section>
            
            <section id="section6">
                <h2>6. å¸¸è§é—®é¢˜è§£ç­”</h2>
                
                <h3>Q1: ä¸ºä»€ä¹ˆæƒé‡æœ€ç»ˆä¼šç¨³å®šåœ¨ [-3, 3] èŒƒå›´å†…ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> è¿™æ˜¯å¤šç§å› ç´ çš„ç»“æœï¼š
                    <ol style="margin-top: 10px;">
                        <li><strong>LayerNorm çš„å½’ä¸€åŒ–æ•ˆåº”</strong>ï¼šæ¯å±‚è¾“å‡ºè¢«å½’ä¸€åŒ–ä¸ºå‡å€¼0ã€æ–¹å·®1ï¼Œé™åˆ¶äº†æƒé‡çš„ç»å¯¹å€¼å¢é•¿</li>
                        <li><strong>Residual Connection</strong>ï¼šæ®‹å·®è¿æ¥ä½¿å¾—æ¢¯åº¦æ›´å‡è¡¡åœ°æµå‘å„å±‚</li>
                        <li><strong>å­¦ä¹ ç‡è¡°å‡</strong>ï¼šæƒé‡æ›´æ–°é€Ÿåº¦é€æ­¥é™ä½</li>
                        <li><strong>æ¢¯åº¦è£å‰ª</strong>ï¼šé˜²æ­¢æå¤§çš„æ¢¯åº¦å¯¼è‡´æƒé‡çªå˜</li>
                    </ol>
                </div>
                
                <h3>Q2: FP16 å’Œ BF16 æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘åº”è¯¥é€‰å“ªä¸ªï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> 
                    <ul style="margin-top: 10px;">
                        <li><strong>FP16</strong>ï¼šä¼ ç»Ÿæ–¹æ¡ˆï¼Œç²¾åº¦é«˜ä½†åŠ¨æ€èŒƒå›´å°ï¼Œéœ€è¦æ¢¯åº¦ç¼©æ”¾</li>
                        <li><strong>BF16</strong>ï¼šGoogle è®¾è®¡ï¼ŒåŠ¨æ€èŒƒå›´å’Œ FP32 ç›¸åŒï¼Œæ— éœ€æ¢¯åº¦ç¼©æ”¾</li>
                    </ul>
                    <p style="margin-top: 10px;"><strong>å»ºè®®ï¼š</strong> å¦‚æœç¡¬ä»¶æ”¯æŒï¼ˆA100, H100ï¼‰ï¼Œä¼˜å…ˆé€‰æ‹© BF16ï¼›å¦åˆ™ä½¿ç”¨ FP16 + æ¢¯åº¦ç¼©æ”¾ã€‚</p>
                </div>
                
                <h3>Q3: æ¢¯åº¦çˆ†ç‚¸å¦‚ä½•æ£€æµ‹ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> ç›‘æ§æ¢¯åº¦èŒƒæ•°ï¼š
                    <div class="code-block" style="margin-top: 10px;">
# åœ¨è®­ç»ƒå¾ªç¯ä¸­æ·»åŠ 
total_norm = 0
for p in model.parameters():
    if p.grad is not None:
        param_norm = p.grad.data.norm(2)
        total_norm += param_norm.item() ** 2
total_norm = total_norm ** 0.5

if total_norm > 1.0:
    print(f"è­¦å‘Šï¼šæ¢¯åº¦çˆ†ç‚¸ï¼Œnorm={total_norm}")
                    </div>
                </div>
                
                <h3>Q4: ä¸ºä»€ä¹ˆæ··åˆç²¾åº¦è®­ç»ƒä¼šåŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> ä¸»è¦åŸå› ï¼š
                    <ul style="margin-top: 10px;">
                        <li>FP16 çŸ©é˜µä¹˜æ³•åœ¨ç°ä»£ GPU ä¸Šæœ‰ä¸“é—¨çš„ç¡¬ä»¶åŠ é€Ÿï¼ˆTensor Coresï¼‰</li>
                        <li>FP16 æ•°æ®å ç”¨å†…å­˜æ›´å°‘ï¼Œç¼“å­˜æ•ˆç‡æ›´é«˜</li>
                        <li>å¸¦å®½éœ€æ±‚é™ä½ 50%ï¼Œæ•°æ®ä¼ è¾“æ›´å¿«</li>
                        <li>æ€»ä½“ååé‡æå‡ 3-8 å€</li>
                    </ul>
                </div>
                
                <h3>Q5: é‡åŒ–åçš„æ¨¡å‹å‡†ç¡®åº¦æŸå¤±å¤šå°‘ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> å–å†³äºé‡åŒ–æ–¹æ³•å’Œæ¨¡å‹ï¼š
                    <ul style="margin-top: 10px;">
                        <li><strong>INT8 é‡åŒ–</strong>ï¼šé€šå¸¸æŸå¤± < 1%ï¼Œéƒ¨åˆ†æ¨¡å‹æ— æŸ</li>
                        <li><strong>INT4 é‡åŒ–</strong>ï¼šé€šå¸¸æŸå¤± 1-3%</li>
                        <li><strong>INT3 æˆ–æ›´ä½</strong>ï¼šæŸå¤± 2-5% æˆ–æ›´å¤š</li>
                        <li><strong>å…³é”®å› ç´ </strong>ï¼šåŸå§‹æ¨¡å‹å¤§å°è¶Šå¤§ï¼Œé‡åŒ–å®¹é”™åº¦è¶Šé«˜</li>
                    </ul>
                </div>
                
                <h3>Q6: æƒé‡åˆå§‹åŒ–çš„æ ‡å‡†å·®åº”è¯¥è®¾å¤šå¤§ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„è¶…å‚æ•°ï¼š
                    <table style="margin-top: 10px; width: 100%;">
                        <tr>
                            <td><strong>å¤ªå¤§</strong></td>
                            <td>æ¿€æ´»å€¼å¯èƒ½é¥±å’Œæˆ–çˆ†ç‚¸</td>
                        </tr>
                        <tr>
                            <td><strong>å¤ªå°</strong></td>
                            <td>æ¢¯åº¦æ¶ˆå¤±ï¼Œæ¨¡å‹æ— æ³•å­¦ä¹ </td>
                        </tr>
                        <tr>
                            <td><strong>æ ‡å‡†å»ºè®®</strong></td>
                            <td>âˆš(2/n_in) æˆ– âˆš(1/n_in)</td>
                        </tr>
                    </table>
                    <p style="margin-top: 10px;">å¯¹äº Transformer æ¨¡å‹ï¼Œé€šå¸¸ç”¨ N(0, 0.02) æ•ˆæœå¾ˆå¥½ã€‚</p>
                </div>
                
                <h3>Q7: å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ‰¹å¤§å°ï¼Ÿ</h3>
                <div class="highlight-box">
                    <strong>A:</strong> æ‰¹å¤§å°å½±å“æƒé‡æ›´æ–°å’Œæ”¶æ•›ï¼š
                    <ul style="margin-top: 10px;">
                        <li><strong>å¤§æ‰¹å¤§å° (>1024)</strong>ï¼šæƒé‡æ›´æ–°ç¨³å®šï¼Œä½†å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜</li>
                        <li><strong>å°æ‰¹å¤§å° (<256)</strong>ï¼šæƒé‡æ›´æ–°æœ‰å™ªå£°ï¼Œæ³›åŒ–èƒ½åŠ›æ›´å¥½</li>
                        <li><strong>æ¨è</strong>ï¼šæ‰¹å¤§å°çš„å¹‚æ¬¡ï¼ˆ64, 128, 256, 512...ï¼‰ï¼Œæ ¹æ® GPU å†…å­˜è°ƒæ•´</li>
                    </ul>
                </div>
            </section>
            
            <section>
                <h2>ğŸ“š å‚è€ƒèµ„æº</h2>
                <ul>
                    <li>PyTorch Mixed Precision Training Documentation</li>
                    <li>NVIDIA Automatic Mixed Precision (AMP) Guide</li>
                    <li>Hugging Face Trainer - Mixed Precision</li>
                    <li>DeepSpeed ä¼˜åŒ–æ–‡æ¡£</li>
                    <li>"Attention is All You Need" - Vaswani et al.</li>
                    <li>"Language Models are Unsupervised Multitask Learners" - Radford et al. (GPT-2)</li>
                </ul>
            </section>
        </main>
        
        <div class="footer">
            <p>
                <strong>å…è´£å£°æ˜ï¼š</strong> æœ¬æ–‡æ¡£æä¾›çš„æ•°æ®å’Œå»ºè®®åŸºäºå…¬å¼€ç ”ç©¶å’Œå¸¸è§å®è·µã€‚
                å®é™…çš„æƒé‡èŒƒå›´å’Œæœ€ä¼˜ç²¾åº¦é€‰æ‹©ä¼šå› å…·ä½“çš„æ¨¡å‹æ¶æ„ã€æ•°æ®é›†å’Œç¡¬ä»¶è€Œå¼‚ã€‚
            </p>
            <p style="margin-top: 15px;">
                ğŸ“Œ <strong>æœ€åæ›´æ–°ï¼š</strong> 2025å¹´11æœˆ | 
                <strong>æŠ€æœ¯æ·±åº¦ï¼š</strong> ä¸­çº§/é«˜çº§ | 
                <strong>éš¾åº¦ç³»æ•°ï¼š</strong> â­â­â­â­
            </p>
        </div>
    </div>
</body>
</html>